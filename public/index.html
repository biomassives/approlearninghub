<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Approvideo Learning Hub</title>
    <script src="https://cdn.tailwindcss.com"></script> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script> <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f6f8; /* Light gray background */
            color: #222;
            margin: 0 0 150px 0; /* Bottom margin for sticky panel */
        }

        /* --- Header --- */
        .site-header {
            display: flex;
            align-items: center;
            padding: 1rem 2rem;
            background-color: #ffffff;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            position: sticky; /* Make header sticky */
            top: 0;
            z-index: 50; /* Ensure header is above content but below modal/panels */
        }
        .site-header .logo {
            font-size: 2rem; margin-right: 1rem; color: #54B948; /* Green */
        }
        .site-header h1 { font-size: 1.5rem; margin: 0; }
        .site-header h1 .green { color: #54B948; }
        .site-header h1 .blue { color: #1E88E5; }
        /* --- Homepage Module Grid --- */
        #modules-grid-container { /* Renamed container */
            padding: 2rem 1rem; /* Add padding */
        }
        .modules-grid {
            margin: 0 auto; /* Centered */
            /* max-width: 900px; */ /* Original value - this might be too narrow for 6 modules */
            max-width: 1400px;  /* Increased max-width to better accommodate 6 modules in a row. Adjust as needed. */
                                /* Alternatively, you could use '100%' if you want it to fill its parent container's width */
            display: grid;
            grid-template-columns: repeat(6, 1fr); /* This creates 6 equal-width columns */
            gap: 1.5rem;
        }
        .module {
            cursor: pointer; display: flex; align-items: center;
            padding: 1.25rem 1.5rem; border-radius: 12px; border: 3px solid;
            font-size: 1.1rem; /* Slightly smaller */ font-weight: 600;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease;
            position: relative; overflow: hidden;
            background-color: #2D3748; /* Dark background */ color: white;
        }
        .module:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        .module::before { /* Subtle gradient overlay */
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
            z-index: 1; opacity: 0.8; transition: opacity 0.3s ease;
        }
        .module:hover::before { opacity: 0; }
        .module .icon { width: 36px; height: 36px; margin-right: 1rem; position: relative; z-index: 2; }
        .module .icon svg { width: 100%; height: 100%; stroke-width: 2; transition: transform 0.3s ease; stroke: white; }
        .module:hover .icon svg { transform: scale(1.1); }
        .module h2 { margin: 0; transition: color 0.2s ease; position: relative; z-index: 2; color: white; }
        /* Module Colors */
        .module.shelter { border-color: #36B9CC; } .module.shelter:hover { background-color: #36B9CC; }
        .module.water { border-color: #1E88E5; } .module.water:hover { background-color: #1E88E5; }
        .module.waste { border-color: #7CB342; } .module.waste:hover { background-color: #7CB342; }
        .module.energy { border-color: #FFC107; } .module.energy:hover { background-color: #FFC107; }
        .module.health { border-color: #EF5350; } .module.health:hover { background-color: #EF5350; }
        .module.food { border-color: #8BC34A; } .module.food:hover { background-color: #8BC34A; }

        /* For screens smaller than 768px, make it 2 columns and let them auto-fit */
        @media (max-width: 768px) {
            .modules-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Or repeat(2, 1fr) for exactly 2 columns */
                max-width: 90%; /* Adjust max-width for smaller screens */
            }
        }
        
        /* Even smaller screens, 1 column */
        @media (max-width: 480px) {
            .modules-grid {
                grid-template-columns: 1fr;
            }
        }

        /* --- Category Content Area (Megamenu Logic Adapted) --- */
        #category-content-container {
            display: none; /* Hidden initially */
            max-width: 1152px; /* max-w-6xl */
            margin: 1.5rem auto 0 auto; /* mt-6 */
            padding: 0 1rem; /* px-4 */
        }
        #category-content-container.visible { display: block; }

        /* Back Button for Category View */
        #back-to-modules-button {
             display: inline-flex; align-items: center; background-color: #6b7280; color: white; padding: 8px 16px; border-radius: 0.375rem;
             font-size: 0.9rem; font-weight: 500; transition: background-color 0.2s ease-in-out; cursor: pointer; border: none; margin-bottom: 1rem;
        }
        #back-to-modules-button:hover { background-color: #4b5563; }
        #back-to-modules-button svg { width: 1.1rem; height: 1.1rem; margin-right: 0.5rem; }

        /* Category Title Display */
        #category-title-display {
            transition: opacity 0.4s ease-out, max-height 0.4s ease-out;
            overflow: hidden; max-height: 0; opacity: 0;
            text-align: center; font-size: 1.75rem; /* Increased size */ font-weight: 600; letter-spacing: 0.05em; color: #374151; text-transform: uppercase;
            margin-bottom: 1rem; /* Added margin */
        }
        #category-title-display.visible { max-height: 100px; opacity: 1; }

        /* Megamenu Content Container (holds columns/details) */
        #megamenu-content {
             background-color: #ffffff; border-radius: 0.5rem; /* rounded-lg */ box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-lg */
             padding: 1.5rem; /* p-6 */
             /* No transitions needed here as parent controls visibility */
        }

        /* Glossary Panel */
        #glossary-panel {
             transition: opacity 0.4s ease-out, max-height 0.4s ease-out, padding 0.4s ease-out, margin-bottom 0.4s ease-out, visibility 0.4s ease-out;
             overflow: hidden; max-height: 0; opacity: 0; padding-top: 0; padding-bottom: 0; margin-bottom: 0; visibility: hidden;
             background-color: #4b5563; /* gray-600 */ color: #f3f4f6; /* gray-100 */ border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
             padding: 1rem; margin-top: 1rem; position: relative; z-index: 20;
        }
        #glossary-panel.visible { max-height: 300px; opacity: 1; padding-top: 1rem; padding-bottom: 1rem; margin-bottom: 1rem; visibility: visible; }
        .glossary-close-button {
             position: absolute; top: 0.5rem; right: 0.75rem; background: rgba(255, 255, 255, 0.1); color: #e5e7eb;
             border: none; border-radius: 9999px; width: 1.75rem; height: 1.75rem; display: flex; align-items: center; justify-content: center; cursor: pointer;
             transition: background-color 0.2s ease, color 0.2s ease;
        }
        .glossary-close-button:hover { background: rgba(255, 255, 255, 0.2); color: white; }

        /* Columns & Details Area */
        #megamenu-columns { transition: opacity 0.4s ease-out, max-height 0.5s ease-out; overflow: hidden; max-height: 2000px; opacity: 1; }
        #megamenu-columns.columns-hidden { max-height: 0; opacity: 0; }
        #megamenu-details-area {
             transition: opacity 0.4s ease-out 0.1s, max-height 0.4s ease-out, margin-top 0.4s ease-out, padding-top 0.4s ease-out, visibility 0.4s ease-out, border-top-width 0.4s ease-out;
             overflow: hidden; max-height: 0; opacity: 0; margin-top: 0; padding-top: 0; visibility: hidden; border-top-width: 0;
             border-color: #e5e7eb; /* gray-200 */
        }
        #megamenu-details-area.visible { max-height: 3500px; /* Increased */ opacity: 1; margin-top: 1.5rem; padding-top: 1.5rem; visibility: visible; border-top-width: 1px; }

        /* Tag pills */
        .tag-pill-button {
             display: inline-block; background-color: #4b5563; color: white; padding: 3px 10px; border-radius: 9999px; font-size: 0.75rem; font-weight: 500;
             margin-right: 4px; margin-bottom: 4px; line-height: 1.2; cursor: pointer; border: none; transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
        }
        .tag-pill-button:hover { background-color: #374151; transform: translateY(-1px); }
        .tag-pill-button.active { background-color: #3b82f6; /* blue-600 */ font-weight: 600; }

        /* Subcategory toggle */
        .subcategory-toggle { transition: color 0.2s ease-in-out; }
        .subcategory-toggle.active { font-weight: 600; color: #2563eb; /* blue-600 */ }

        /* Details Back Button */
        .details-back-button {
             display: inline-flex; align-items: center; background-color: #6b7280; color: white; padding: 6px 16px; border-radius: 0.375rem;
             font-size: 0.875rem; font-weight: 500; transition: background-color 0.2s ease-in-out; cursor: pointer; border: none;
        }
        .details-back-button:hover { background-color: #4b5563; }

        /* Sibling Subcategory Link Styles */
        .sibling-links-container { margin-bottom: 1.5rem; padding-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; line-height: 1.5; }
        .sibling-links-container > span { font-size: 0.9rem; font-weight: 500; color: #6b7280; margin-right: 8px; }
        .sibling-link-pill {
            display: inline-block; padding: 4px 12px; border-radius: 9999px; margin: 3px 4px; font-weight: 600; color: white; background-color: #4f46e5; /* Indigo */
            text-decoration: none; font-size: 0.8rem; transition: background-color 0.2s, transform 0.1s; cursor: pointer; border: none;
        }
        .sibling-link-pill:hover { background-color: #4338ca; transform: translateY(-1px); }
        .sibling-link-pill.current { background-color: #a5b4fc; color: #3730a3; cursor: default; pointer-events: none; }

        /* Video Linker Styles */
        .video-linker-container { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px dashed #e5e7eb; }
        .video-linker { display: flex; align-items: center; justify-content: center; width: 72px; height: 72px; border-radius: 8px; text-decoration: none; color: white; font-size: 30px; transition: transform 0.2s ease, box-shadow 0.2s ease; box-shadow: 1px 1px 4px rgba(0,0,0,0.15); overflow: hidden; cursor: pointer; flex-shrink: 0; }
        .video-linker:hover { transform: scale(1.05); box-shadow: 3px 3px 7px rgba(0,0,0,0.25); }
        .video-linker.no-icon { font-size: 9px; line-height: 1.1; padding: 5px; text-align: center; word-wrap: break-word; color: #333; background-color: #e5e7eb !important; }

        /* Shared Info Panel Styles */
        #video-info-panel { display: none; flex-direction: column; background-color: #343a40; color: #f8f9fa; border-top: 3px solid #007bff; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); transition: opacity 0.3s ease; opacity: 0; position: fixed; bottom: 0; left: 0; right: 0; z-index: 1000; }
        #video-info-panel.visible { display: flex; opacity: 1; }
        .local-video-row { display: none; align-items: center; background-color: #fef9c3; padding: 8px 15px; border-bottom: 1px solid #fde68a; }
        .local-video-row.visible { display: flex; }
        .local-video-link { display: flex; align-items: center; text-decoration: none; gap: 10px; width: 100%; }
        .local-video-link:hover .local-video-text { text-decoration: underline; }
        .local-video-thumb { width: 40px; height: 40px; object-fit: cover; border-radius: 4px; border: 1px solid #fcd34d; flex-shrink: 0; background-color: #fefce8; }
        .local-video-text { font-size: 0.8rem; color: #713f12; font-weight: 500; transition: text-decoration 0.2s; }
        .local-video-text span { font-family: monospace; font-weight: 600; }
        .youtube-info-row { display: flex; align-items: flex-start; padding: 10px 15px; }
        #video-info-panel .info-icon { font-size: 36px; color: #FF0000; margin-right: 15px; flex-shrink: 0; padding-top: 3px; }
        #video-info-panel .info-text { display: flex; flex-direction: column; gap: 3px; overflow: hidden; flex-grow: 1; }
        #video-info-panel .info-url, #video-info-panel .info-title, #video-info-panel .info-description { margin: 0; line-height: 1.4; white-space: normal; word-break: break-word; }
        #video-info-panel .info-url { font-size: 0.75em; color: #adb5bd; font-family: monospace; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        #video-info-panel .info-title { font-size: 1em; font-weight: bold; color: #ffffff; }
        #video-info-panel .info-description { font-size: 0.85em; color: #ced4da; max-height: 4.0em; overflow-y: auto; }
        #video-info-panel .placeholder-text { font-style: italic; color: #888; }

   /* Slideshow Container */
    .slideshow-container {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        margin-bottom: 1rem;
    }
    
    /* Slides */
    .slideshow-slide {
        display: none;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    
    .slideshow-slide.active {
        display: block;
        opacity: 1;
    }
    
    /* Navigation Arrows */
    .slideshow-prev, .slideshow-next {
        opacity: 0.7;
        transition: opacity 0.3s, transform 0.2s;
    }
    
    .slideshow-prev:hover, .slideshow-next:hover {
        opacity: 1;
    }
    
    .slideshow-prev:active, .slideshow-next:active {
        transform: translateY(-50%) scale(0.95);
    }
    
    /* Dots */
    .slideshow-dot {
        transition: background-color 0.3s, transform 0.2s;
    }
    
    .slideshow-dot.active {
        background-color: white;
        transform: scale(1.2);
    }
    
    /* Dark mode adjustments */
    .dark .slideshow-container {
        background-color: #1f2937;
    }
    
    .dark .featured-slideshow h2 {
        color: #f3f4f6;
    }
        
    </style>
</head>
<body class="bg-gray-100"> <header class="site-header">
        <div class="logo">ðŸŒ±</div>
        <h1><span class="green">Approvideo</span> <span class="blue">Learning Hub</span></h1>
        </header>

    <div id="modules-grid-container">
        <main class="modules-grid">
            </main>

<div id="featured-content-container" class="mt-6 mx-auto max-w-6xl px-4">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Featured Content</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Featured Item 1: Water Distillation -->
        <div class="featured-item bg-white rounded-lg overflow-hidden shadow-md border border-gray-200 flex flex-col">
            <div class="relative pt-[56.25%] bg-gray-100">
                <!-- Video thumbnail with play button overlay -->
                <div class="absolute inset-0 flex items-center justify-center">


                    
                    <img src="/assets/video/thumbnails/water_distillation_diy.jpg" 
                         alt="DIY Water Distillation System" 
                         class="w-full h-full object-cover"
                         onerror="this.src='https://placehold.co/600x400/e5e7eb/64748b?text=Water+Distillation'; this.onerror=null;">
                    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center shadow-lg transform transition hover:scale-110">
                            <i class="fas fa-play text-white text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-4 flex-grow">
                <div class="flex justify-between items-start mb-2">
                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded">Water</span>
                    <span class="text-gray-500 text-sm"><i class="far fa-clock mr-1"></i>14:22</span>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">DIY Water Distillation System</h3>
                <p class="text-gray-600 text-sm mb-3">Learn how to build an efficient water distillation system using common household materials. Perfect for emergency preparedness or off-grid living.</p>
                
                <div class="flex items-center mt-auto">
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">purification</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">desalination</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800">DIY</div>
                </div>
            </div>
            
            <div class="p-4 border-t border-gray-200 bg-gray-50">
                <a href="/assets/video/WATER DESALINATION notes - DHAKA.mp4" class="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center transition">
                    <i class="fas fa-play-circle mr-2"></i>
                    Watch Video
                    <i class="fas fa-arrow-right ml-auto"></i>
                </a>
            </div>
        </div>
        
        <!-- Featured Item 2: Rocket Stove -->
        <div class="featured-item bg-white rounded-lg overflow-hidden shadow-md border border-gray-200 flex flex-col">
            <div class="relative pt-[56.25%] bg-gray-100">
                <!-- Video thumbnail with play button overlay -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <img src="/assets/video/thumbnails/rocket_stove_diy.jpg" 
                         alt="How to Build a Rocket Stove" 
                         class="w-full h-full object-cover"
                         onerror="this.src='https://placehold.co/600x400/e5e7eb/64748b?text=Rocket+Stove'; this.onerror=null;">
                    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
                        <div class="w-16 h-16 bg-amber-600 rounded-full flex items-center justify-center shadow-lg transform transition hover:scale-110">
                            <i class="fas fa-play text-white text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-4 flex-grow">
                <div class="flex justify-between items-start mb-2">
                    <span class="px-2 py-1 bg-amber-100 text-amber-800 text-xs font-semibold rounded">Energy</span>
                    <span class="text-gray-500 text-sm"><i class="far fa-clock mr-1"></i>18:35</span>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">How to Build a Rocket Stove</h3>
                <p class="text-gray-600 text-sm mb-3">Create a highly efficient cooking stove using minimal materials. This design burns cleanly, uses less fuel, and can be built in under an hour with common materials.</p>
                
                <div class="flex items-center mt-auto">
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">cooking</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">fuel efficiency</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800">sustainable</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2"><a href="/assets/SUPER_STOVE_AR.mp4">audio arabic</a></div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800"<a href="/assets/SUPER_STOVE_EN.mp4">audio english</a></div>

                </div>
            </div>
            
            <div class="p-4 border-t border-gray-200 bg-gray-50">
                <a href="/assets/video/rocket_stove_diy.mp4" class="text-amber-600 hover:text-amber-800 text-sm font-medium flex items-center transition">
                    <i class="fas fa-play-circle mr-2"></i>
                    Watch Video
                    <i class="fas fa-arrow-right ml-auto"></i>
                </a>
            </div>
        </div>
        
        <!-- Featured Item 3: Solar Cooker -->
        <div class="featured-item bg-white rounded-lg overflow-hidden shadow-md border border-gray-200 flex flex-col">
            <div class="relative pt-[56.25%] bg-gray-100">
                <!-- Video thumbnail with play button overlay -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <div id="solar-cooker-slideshow" class="featured-slideshow mt-8 mb-12 mx-auto max-w-4xl">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-sun text-yellow-500 mr-2"></i>
                            Solar Cooker Designs
                        </h2>
                        
                        <!-- Slideshow Container -->
                        <div class="slideshow-container relative bg-gray-100 rounded-lg overflow-hidden">
                            <!-- Slides -->
                            <div class="slideshow-slide active">
                                <div class="relative pt-[56.25%]">
                                    <img src="placeholder-solar-cooker-1.jpg" data-src="/assets/images/solar-cookers/parabolic-cooker.jpg" 
                                         alt="Parabolic Solar Cooker" class="absolute inset-0 w-full h-full object-cover transition-opacity"
                                         onerror="this.src='https://placehold.co/800x450/FEF9C3/713F12?text=Parabolic+Solar+Cooker'; this.onerror=null;">
                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-4">
                                        <h3 class="text-lg font-medium">Parabolic Solar Cooker</h3>
                                        <p class="text-sm">High temperature cooking with focused sunlight. Ideal for boiling and frying.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="slideshow-slide">
                                <div class="relative pt-[56.25%]">
                                    
                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-4">
                                        <h3 class="text-lg font-medium">Solar Box Cooker</h3>
                                        <p class="text-sm">Simple and effective design using common materials. Great for slow cooking and baking.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="slideshow-slide">
                                <div class="relative pt-[56.25%]">
                                    <img src="placeholder-solar-cooker-2.jpg" data-src="/assets/images/solar-cookers/box-cooker.jpg" 
                                         alt="Solar Box Cooker" class="absolute inset-0 w-full h-full object-cover transition-opacity"
                                         onerror="this.src='https://placehold.co/800x450/FEF9C3/713F12?text=Solar+Box+Cooker'; this.onerror=null;">
                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-4">

                                    </div>
                                </div>
                            </div>
                            
                            <div class="slideshow-slide">
                                <div class="relative pt-[56.25%]">

                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-4">
                                        <h3 class="text-lg font-medium">Panel Solar Cooker</h3>
                                        <p class="text-sm">Lightweight, portable design with reflective panels. Easy to build and transport.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="slideshow-slide">
                                <div class="relative pt-[56.25%]">
                                    <img src="placeholder-solar-cooker-3.jpg" data-src="/assets/images/solar-cookers/panel-cooker.jpg" 
                                         alt="Panel Solar Cooker" class="absolute inset-0 w-full h-full object-cover transition-opacity"
                                         onerror="this.src='https://placehold.co/800x450/FEF9C3/713F12?text=Panel+Solar+Cooker'; this.onerror=null;">
                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-4">

                                    </div>
                                </div>
                            </div>

                            <div class="slideshow-slide">
                                <div class="relative pt-[56.25%]">

                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-4">
                                        <h3 class="text-lg font-medium">Evacuated Tube Solar Cooker</h3>
                                        <p class="text-sm">Modern design using vacuum-sealed glass tubes. Efficient cooking even in moderate sunlight.</p>
                                    </div>
                                </div>
                            </div>

                            
                            <div class="slideshow-slide">
                                <div class="relative pt-[56.25%]">
                                    <img src="placeholder-solar-cooker-4.jpg" data-src="/assets/images/solar-cookers/evacuated-tube-cooker.jpg" 
                                         alt="Evacuated Tube Solar Cooker" class="absolute inset-0 w-full h-full object-cover transition-opacity"
                                         onerror="this.src='https://placehold.co/800x450/FEF9C3/713F12?text=Evacuated+Tube+Solar+Cooker'; this.onerror=null;">
                                    <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-4">

                                    </div>
                                </div>
                            </div>
                            
                            <!-- Navigation Arrows -->
                            <button class="slideshow-prev absolute top-1/2 left-4 -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white rounded-full w-10 h-10 flex items-center justify-center z-10 transition-colors">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="slideshow-next absolute top-1/2 right-4 -translate-y-1/2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white rounded-full w-10 h-10 flex items-center justify-center z-10 transition-colors">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            
                            <!-- Dots Navigation -->
                            <div class="slideshow-dots absolute bottom-16 left-0 right-0 flex justify-center space-x-2 z-10">
                                <button class="slideshow-dot active w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors" data-index="0"></button>
                                <button class="slideshow-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors" data-index="1"></button>
                                <button class="slideshow-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors" data-index="2"></button>
                                <button class="slideshow-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors" data-index="3"></button>
                                <button class="slideshow-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors" data-index="4"></button>
                                <button class="slideshow-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors" data-index="5"></button>
                                <button class="slideshow-dot w-3 h-3 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors" data-index="6"></button>
                            </div>
                        </div>
                        
                        <!-- Learn More Button -->
                        <div class="text-center mt-4">
                            <a href="#energy-0" class="inline-flex items-center px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md transition-colors">
                                <i class="fas fa-info-circle mr-2"></i>
                                Learn More About Solar Cooking
                            </a>
                        </div>
                    </div>



                    
                 
                </div>
            </div>
            
            <div class="p-4 flex-grow">
                <div class="flex justify-between items-start mb-2">
                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded">Energy</span>
                    <span class="text-gray-500 text-sm"><i class="far fa-clock mr-1"></i>12:48</span>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Simple Solar Cooker Setup</h3>
                <p class="text-gray-600 text-sm mb-3">Learn how to harness the sun's energy for cooking with this easy-to-build solar cooker. Perfect for fuel-free cooking during daylight hours in sunny regions.</p>
                
                <div class="flex items-center mt-auto">
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">solar</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">cooking</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800">zero-fuel</div>
                </div>
            </div>
            

        </div>
        
        <!-- Featured Item 4: Food Security Research -->
        <div class="featured-item bg-white rounded-lg overflow-hidden shadow-md border border-gray-200 flex flex-col">
            <div class="relative pt-[56.25%] bg-gray-100">
                <!-- Research document thumbnail -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <img src="/assets/images/food_security_research.jpg" 
                         alt="Food Security Research" 
                         class="w-full h-full object-cover"
                         onerror="this.src='https://placehold.co/600x400/e5e7eb/64748b?text=Food+Security+Research'; this.onerror=null;">
                    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
                        <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center shadow-lg transform transition hover:scale-110">
                            <i class="fas fa-file-alt text-white text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-4 flex-grow">
                <div class="flex justify-between items-start mb-2">
                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded">Food</span>
                    <span class="text-gray-500 text-sm"><i class="far fa-calendar mr-1"></i>May 2025</span>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Food Security Research: Resilient Systems</h3>
                <p class="text-gray-600 text-sm mb-3">Comprehensive study on building resilient local food systems in challenging environments. Includes case studies, practical frameworks, and implementation guidelines.</p>
                
                <div class="flex items-center mt-auto">
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">research</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800 mr-2">food systems</div>
                    <div class="bg-gray-200 px-3 py-1 rounded-full text-xs font-medium text-gray-800">resilience</div>
                </div>
            </div>
            

        </div>
    </div>
</div>

<!-- CSS styles for Featured Content -->
<style>
    .featured-item {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .featured-item:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .featured-item .play-button {
        opacity: 0.9;
        transition: opacity 0.2s ease, transform 0.2s ease;
    }
    
    .featured-item:hover .play-button {
        opacity: 1;
        transform: scale(1.1);
    }
</style>



    </div>

    <div id="category-content-container">
        <button id="back-to-modules-button">
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"></path> </svg>
             Back to Modules
        </button>
        <div id="category-title-display"></div>
        <div id="glossary-panel">
            <p class="text-center text-gray-400">Click a tag to see its definition.</p>
        </div>
        <div id="megamenu-content">
            <div id="megamenu-columns" class="grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-8">
                </div>
            <div id="megamenu-details-area" class="border-t border-gray-200">
                </div>
        </div>
    </div>

    <div id="video-info-panel">
        <div class="local-video-row" id="local-video-row">
             <a href="#" target="_blank" class="local-video-link" id="local-video-link">
                 <img src="https://placehold.co/40x40/fef9c3/713f12?text=MP4" alt="Local Video Thumbnail" class="local-video-thumb" id="local-video-thumb" onerror="this.src='https://placehold.co/40x40/fef9c3/713f12?text=MP4'; this.onerror=null;">
                 <span class="local-video-text">Watch local version: <span id="local-video-filename-display"></span></span>
             </a>
        </div>
        <div class="youtube-info-row">
            <div class="info-icon"><i class="fab fa-youtube"></i></div>
            <div class="info-text">
                <p class="info-url" id="info-url"><span class="placeholder-text">Hover over a video square...</span></p>
                <p class="info-title" id="info-title"></p>
                <p class="info-description" id="info-description"></p>
            </div>
        </div>
    </div>

    <script>
        // --- Data (categoryData and tagGlossary should be pasted here) ---
        const categoryData = [
            { // Start of Shelter Area
                "area": "Shelter",
                "icon": "fa-home", // Font Awesome icon used for data, Feather for grid
                "featherIcon": "home", // Added Feather icon name
                "subcategories": [
                    {
                        "uniqueId": "shelter-0",
                        "title": "Low-cost, Durable Construction Methods",
                        "description": "Learn how to build safe, long-lasting structures using simple tools and affordable materials. Ideal for creating strong shelters in resource-limited areas.",
                        "tags": ["construction", "low-cost", "durable", "building", "DIY", "resilience", "earthbag", "bamboo", "superadobe", "natural building"],
                        "context": "Focuses on creating robust shelters that withstand local environmental conditions (weather, pests, minor seismic activity) using affordable, accessible techniques and minimal specialized tools, ensuring longevity with reasonable maintenance.",
                        "materials": ["Earthbags / Superadobe tubes", "Barbed Wire", "Soil (appropriate mix)", "Bamboo (treated)", "Recycled Tires", "Pallet Wood", "Basic Fasteners", "Natural Plasters/Sealers"],
                        "processSteps": ["1. Site Assessment & Clearing", "2. Foundation Laying (rubble trench, earthbag, tire)", "3. Wall Construction (stacking, tamping, curing)", "4. Lintels & Openings (doors, windows)", "5. Roofing Structure & Covering", "6. Plastering & Finishing (protection & aesthetics)"],
                        "videos": [
                            {
                                "title": "DIY Concrete Block Foundation for Small Structures", "youtubeId": "KDvH1hoEMPQ", "description": "How to build a simple but strong foundation with concrete blocks", "icon_tag_fa": "fas fa-layer-group", "color_tag": "#78716c", "localVideoFilename": "shelter_block_foundation.mp4",
                                "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": []
                            },
                            {
                                "title": "Building With Earth - Complete Cob Workshop", "youtubeId": "0olcwSwRELw", "description": "Learn the basics of building with cob...", "icon_tag_fa": "fas fa-house-user", "color_tag": "#a16207", "localVideoFilename": "shelter_cob_workshop.mp4",
                                "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": []
                            }
                        ]
                    },
                    {
                        "uniqueId": "shelter-1",
                        "title": "Locally Available Materials",
                        "description": "Find out how to identify and use materials from your immediate surroundingsâ€”like earth, bamboo, or recycled materialsâ€”to lower costs and support sustainability.",
                        "tags": ["materials", "local", "sustainability", "earthship", "vernacular architecture", "resourcefulness", "clay", "stone", "salvaged", "bamboo", "natural building"],
                        "context": "Emphasizes using resources found nearby (soil, stone, timber, bamboo, waste streams) to minimize transport costs, reduce environmental impact, often resulting in structures well-suited to the local climate and culture.",
                        "materials": ["Local Soil (clay, sand, silt testing)", "Stones/Rocks", "Timber/Bamboo (sustainably harvested)", "Grasses/Straw (for binder/insulation)", "Recycled Materials (bottles, cans, tires)", "Natural Binders (lime, clay slip)"],
                        "processSteps": ["1. Site & Resource Mapping", "2. Material Identification & Field Testing (soil jar test, etc.)", "3. Sustainable Harvesting Practices", "4. Material Processing (drying, treating, shaping)", "5. Construction Integration Techniques", "6. Assessing Long-term Availability"],
                        "videos": [
                            {
                                "icon_tag_fa": "fas fa-paint-roller", "color_tag": "#a16207", "title": "How to Identify and Process Local Clay for Construction", "youtubeId": "eOOYrY4zxpw", "description": "Testing and preparing natural clay for building projects", "localVideoFilename": "shelter_local_clay.mp4",
                                "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": []
                            },
                            {
                                "icon_tag_fa": "fas fa-tree", "color_tag": "#16a34a", "title": "Bamboo Harvesting and Treatment for Construction", "youtubeId": "9-Ka4YcyOFo", "description": "How to select, harvest, and treat bamboo for long-lasting building materials", "localVideoFilename": "shelter_bamboo_harvest.mp4",
                                "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": []
                            },
                            {
                                "icon_tag_fa": "fas fa-recycle", "color_tag": "#059669", "title": "Creative Reuse: Building With Glass Bottles", "youtubeId": "M7P8YAIhBkY", "description": "How to incorporate waste glass bottles into walls for beauty and function", "localVideoFilename": "shelter_glass_bottles.mp4",
                                "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": []
                            }
                        ]
                    }
                ]
            },
            {
                "area": "Water", "icon": "fa-tint", "featherIcon": "droplet",
                "subcategories": [
                     {
                         "uniqueId": "water-0", "title": "Purification", "description": "Use household items or low-cost filters to make water safe for drinking...", "tags": ["clean water", "filtration", "health", "SODIS", "potable water", "waterborne disease", "DIY filter", "boiling", "disinfection", "resourcefulness", "water testing"],
                         "context": "Access to safe drinking water is fundamental for health...", "materials": ["Clean Containers...", "Heat Source...", "Clear PET Bottles...", "Cloth...", "Sand...", "Gravel...", "Activated Charcoal...", "Simple Chlorine/Iodine Solution..."], "processSteps": ["1. Pre-filtration...", "2. Boiling...", "3. Solar Disinfection...", "4. Building Layered Filter...", "5. Chemical Disinfection...", "6. Safe Storage..."],
                         "videos": [
                            { "icon_tag_fa": "fas fa-filter", "color_tag": "#4b5563", "title": "DIY Water Filter Build (Microbial Safety Focus)", "youtubeId": "31", "description": "Detailed guide (City Prepping)...", "localVideoFilename": "water_diy_filter_safety.mp4", "authors": "City Prepping", "researchReviewItems": [], "contentCreatorArchive": "https://www.youtube.com/@CityPrepping", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-flask-vial", "color_tag": "#ef4444", "title": "Understanding Water Safety & Contamination", "youtubeId": "32", "description": "Explains (TED-Ed) different types...", "localVideoFilename": "water_safety_teded.mp4", "authors": "TED-Ed / Mia Nacamulli", "researchReviewItems": [], "contentCreatorArchive": "https://www.youtube.com/@TEDEd", "licence": "Standard YouTube License", "patreon": "https://www.patreon.com/teded", "socials": {"twitter": "https://twitter.com/TED_ED"}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-flask", "color_tag": "#22c55e", "title": "Simple DIY Water Filter Experiment (Layer Demo)", "youtubeId": "25", "description": "Demonstrates (Hungry SciANNtist)...", "localVideoFilename": "water_filter_experiment.mp4", "authors": "Hungry SciANNtist", "researchReviewItems": [], "contentCreatorArchive": "https://www.youtube.com/@HungrySciANNtist", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                         ]
                     },
                     {
                         "uniqueId": "water-1", "title": "Desalination", "description": "Build small-scale systems to turn salty or brackish water into fresh water...", "tags": ["desalination", "salt removal", "ocean", "irrigation", "solar still", "distillation", "potable water", "coastal living", "arid regions", "solar thermal"],
                         "context": "Provides a vital source of freshwater in coastal or arid regions...", "materials": ["Dark Basin/Container...", "Clear Cover...", "Collection Trough/Channel...", "Freshwater Container...", "Sealant...", "Insulation..."], "processSteps": ["1. Constructing Basin & Cover...", "2. Positioning for Maximum Sun...", "3. Setting up Collection Channel...", "4. Filling Basin...", "5. Monitoring Condensation...", "6. Periodic Cleaning..."],
                         "videos": [
                             { "icon_tag_fa": "fas fa-sun", "color_tag": "#f97316", "title": "Build a Simple Solar Still", "youtubeId": "bJ9r8RFp4gE", "description": "Step-by-step construction...", "localVideoFilename": "water_solar_still.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                             { "icon_tag_fa": "fas fa-tint-slash", "color_tag": "#3b82f6", "title": "Improving Solar Still Efficiency", "youtubeId": "d5bjI9jgCxk", "description": "Tips and tricks...", "localVideoFilename": "water_solar_still_efficiency.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                         ]
                     },
                     {
                         "uniqueId": "water-2", "title": "Efficient Distribution", "description": "Design and improve gravity-fed or pump-based systems...", "tags": ["pipes", "delivery", "infrastructure", "gravity feed", "water storage", "pump", "conservation", "ram pump", "water pressure", "plumbing"],
                         "context": "Ensuring collected or purified water reaches points of use reliably...", "materials": ["Piping...", "Fittings...", "Storage Tanks...", "Pump...", "Basic Surveying Tools...", "Sealants/Tape"], "processSteps": ["1. Mapping Source...", "2. System Design...", "3. Trenching & Pipe Laying...", "4. Tank Installation...", "5. Pump Setup...", "6. Testing, Leak Detection..."],
                         "videos": [
                              { "icon_tag_fa": "fas fa-chart-line", "color_tag": "#06b6d4", "title": "Setting Up a Gravity Feed Water System", "youtubeId": "9ICi3rFj28M", "description": "How to use elevation...", "localVideoFilename": "water_gravity_feed.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "icon_tag_fa": "fas fa-cogs", "color_tag": "#475569", "title": "Building and Installing a Ram Pump", "youtubeId": "Jl5TodxqQpc", "description": "Construct a pump that works...", "localVideoFilename": "water_ram_pump.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                         ]
                     }
                ]
            },
            {
                "area": "Waste", "icon": "fa-recycle", "featherIcon": "trash-2",
                "subcategories": [
                    {
                        "uniqueId": "waste-0", "title": "Composting", "description": "Learn how to convert organic waste into nutrient-rich soil...", "tags": ["composting", "organic waste", "soil improvement", "sustainability", "fertilizer", "vermicomposting", "hot composting", "cold composting", "bokashi", "nutrient cycling"],
                        "context": "Transforms kitchen scraps and yard waste...", "materials": ["Organic 'Greens'...", "Organic 'Browns'...", "Compost Bin/Container...", "Water Source...", "Turning Tool...", "(Optional: worms...)"], "processSteps": ["1. Choose Method...", "2. Collect & Chop...", "3. Layer Greens & Browns...", "4. Maintain Moisture...", "5. Aerate/Turn...", "6. Harvest & Use..."],
                        "videos": [
                            { "icon_tag_fa": "fas fa-seedling", "color_tag": "#84cc16", "title": "Building a Three-Bin Compost System", "youtubeId": "JehP4xlF4gI", "description": "Creating an efficient composting setup...", "localVideoFilename": "waste_3bin_compost.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-worm", "color_tag": "#a16207", "title": "Urban Balcony Composting With Worms", "youtubeId": "5CnSYWX-N6I", "description": "Guide to small-scale vermicomposting...", "localVideoFilename": "waste_vermicompost.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-temperature-high", "color_tag": "#f97316", "title": "Hot Composting Technique for Fast Results", "youtubeId": "HWypVv1dzJQ", "description": "Learn the accelerated composting method...", "localVideoFilename": "waste_hot_compost.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                        ]
                    },
                    {
                        "uniqueId": "waste-1", "title": "Recycling Systems", "description": "Set up community or household recycling systems...", "tags": ["recycling", "waste sorting", "materials recovery", "circular economy", "community action", "plastic recycling", "paper recycling", "metal recycling", "glass recycling", "waste management"],
                        "context": "Organizes the collection and separation...", "materials": ["Designated Bins/Containers...", "Signage/Labels...", "Collection Bags/Carts...", "Basic Cleaning Supplies...", "(Community: Central collection point...)"], "processSteps": ["1. Identify Accepted Materials...", "2. Set Up Sorting Stations...", "3. Rinse/Clean Recyclables...", "4. Store Sorted Materials...", "5. Coordinate Collection/Drop-off...", "6. Educate Participants..."],
                         "videos": [
                            { "icon_tag_fa": "fas fa-users", "color_tag": "#6366f1", "title": "Setting Up a Community Recycling Station", "youtubeId": "IsTnQ9U5wN8", "description": "Organizing an effective central collection point...", "localVideoFilename": "waste_community_recycling.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-cogs", "color_tag": "#6b7280", "title": "DIY Plastic Processing for Reuse", "youtubeId": "kUR6_bQLU-E", "description": "Introduction to small-scale methods...", "localVideoFilename": "waste_plastic_processing.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-newspaper", "color_tag": "#a8a29e", "title": "Paper Recycling and Homemade Paper Making", "youtubeId": "Gq7L9-0XdVw", "description": "How to create new paper products...", "localVideoFilename": "waste_paper_recycling.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                         ]
                    },
                    {
                        "uniqueId": "waste-2", "title": "Upcycling", "description": "Transform discarded items into useful products...", "tags": ["upcycling", "creative reuse", "waste reduction", "DIY", "crafts", "resourcefulness", "zero waste", "repurposing"],
                        "context": "Goes beyond basic recycling by creatively transforming waste...", "materials": ["Discarded Items...", "Basic Tools...", "Cleaning Supplies...", "Finishing Materials..."], "processSteps": ["1. Collect & Select...", "2. Clean & Prepare...", "3. Brainstorm/Design...", "4. Cut, Shape, Assemble...", "5. Finish & Decorate...", "6. Share Ideas..."],
                         "videos": [
                            { "icon_tag_fa": "fas fa-couch", "color_tag": "#78350f", "title": "Making Furniture From Wooden Pallets", "youtubeId": "zIcDVPkHVmI", "description": "Constructing chairs, tables, beds...", "localVideoFilename": "waste_pallet_furniture.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-bottle-water", "color_tag": "#0ea5e9", "title": "Plastic Bottle Building Blocks and Construction", "youtubeId": "lnT1qY0a4KA", "description": "Using plastic bottles filled with sand...", "localVideoFilename": "waste_bottle_bricks.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-recycle", "color_tag": "#52525b", "title": "Tire Upcycling for Garden Projects", "youtubeId": "AxiI17y0fNk", "description": "Transforming old tires into planters...", "localVideoFilename": "waste_tire_garden.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                         ]
                    },
                    {
                        "uniqueId": "waste-3", "title": "Wastewater Management", "description": "Build simple systems to treat and safely dispose of greywater and blackwater...", "tags": ["wastewater", "greywater", "blackwater", "sanitation", "treatment", "constructed wetland", "reed bed", "filtration", "hygiene", "bioremediation", "water reuse"],
                        "context": "Safely treats water from sinks, showers (greywater) or toilets (blackwater)...", "materials": ["Pipes/Plumbing...", "Gravel...", "Sand...", "Water-loving Plants...", "Waterproof Liner...", "Settling Tank/Container...", "Distribution Pipes..."], "processSteps": ["1. Identify Source...", "2. Site Selection...", "3. System Design...", "4. Excavation & Liner...", "5. Layering Filter Media...", "6. Planting...", "7. Connecting Inflow/Outflow...", "8. Monitoring & Maintenance..."],
                         "videos": [
                            { "icon_tag_fa": "fas fa-shower", "color_tag": "#9ca3af", "title": "DIY Greywater System for Garden Irrigation", "youtubeId": "v3KGpnRrQ_I", "description": "Simple methods for reusing household water...", "localVideoFilename": "waste_greywater_garden.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-leaf", "color_tag": "#16a34a", "title": "Constructing a Basic Wetland Filtration System", "youtubeId": "6gGKKnD-Z4Q", "description": "Building a natural water treatment system...", "localVideoFilename": "waste_constructed_wetland.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-toilet", "color_tag": "#a16207", "title": "Simple Septic System Installation Overview", "youtubeId": "QYyZdJc2RhY", "description": "Understanding the components and setup...", "localVideoFilename": "waste_septic_overview.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                         ]
                    }
                ]
            },
            {
                "area": "Energy", "icon": "fa-solar-panel", "featherIcon": "zap",
                "subcategories": [
                    {
                        "uniqueId": "energy-0", "title": "Solar Box Cookers", "description": "Effective basic box cooker design...", "tags": ["solar cooker", "DIY", "cooking technology", "off-grid", "passive solar", "solar thermal", "appropriate technology", "fuel efficiency"],
                        "context": "Utilizes direct sunlight for cooking...", "materials": ["Cardboard Boxes...", "Insulation...", "Reflective Material...", "Glass/Oven Bag...", "Black Paint...", "Dark, Lidded Pot...", "Glue/Tape"], "processSteps": ["1. Construct Insulated Box...", "2. Line Inner Box...", "3. Create Transparent Lid...", "4. Paint Pot Black...", "5. Position Cooker...", "6. Place Pot Inside..."],
                        "videos": []
                    },
                    {
                        "uniqueId": "energy-1", "title": "Biogas ration", "description": "Turn kitchen and animal waste into clean-burning gas...", "tags": ["biogas", "waste", "energy", "renewable", "anaerobic digestion", "cooking fuel", "waste to energy", "methane", "digestate", "fertilizer"],
                        "context": "Converts organic waste into methane gas...", "materials": ["Airtight Container...", "Inlet Pipe...", "Outlet Pipe...", "Gas Outlet Pipe...", "Tubing...", "Manure/Kitchen Waste...", "Water"], "processSteps": ["1. Construct/Adapt Digester...", "2. Install Pipes...", "3. Prepare Slurry...", "4. 'Seed' Digester...", "5. Feed Regularly...", "6. Safely Plumb & Use Gas..."],
                        "videos": []
                    },
                    {
                        "uniqueId": "energy-2", "title": "Microgrids for Sustainable Power", "description": "Build small, local power systems...", "tags": ["microgrid", "sustainability", "infrastructure", "renewable energy", "off-grid power", "community power", "solar", "wind power", "battery storage", "energy access", "resilience"],
                        "context": "Creates localized, independent energy networks...", "materials": ["ration Source(s)...", "Charge Controllers...", "Battery Bank...", "Inverter(s)...", "Distribution Wiring...", "Load Management System...", "Monitoring Equipment"], "processSteps": ["1. Energy Audit...", "2. System Design...", "3. Installation...", "4. Wiring & Safety...", "5. Distribution Network...", "6. Commissioning...", "7. Community Governance..."],
                        "videos": []
                    },
                    {
                        "uniqueId": "energy-3", "title": "Hand Pressed Heat & Cooking Fuel Briquettes", "description": "DIY cook stove Fuel produced...", "tags": ["cooking fuel", "upcycling", "home heating", "biomass", "briquettes", "waste to energy", "appropriate technology", "DIY", "fuel efficiency"],
                        "context": "Compresses loose biomass waste...", "materials": ["Dry Biomass Waste...", "Water...", "Binder...", "Briquette Press...", "Drying Rack/Area"], "processSteps": ["1. Collect & Shred...", "2. Mix with Water...", "3. Load Slurry...", "4. Compress Firmly...", "5. Eject Wet Briquette...", "6. Dry Thoroughly..."],
                        "videos": [
                            { "icon_tag_fa": "fas fa-fire-alt", "color_tag": "#d97706", "title": "Simple Biomass Briquette Press Construction", "youtubeId": "1LD7BhR3jTI", "description": "Building a manual press...", "localVideoFilename": "energy_briquette_press.mp4", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                        ]
                    }
                ]
            },
            {
                "area": "Health", "icon": "fa-heartbeat", "featherIcon": "heart",
                "subcategories": [
                    {
                        "uniqueId": "health-0", "title": "EMT Skills", "description": "Learn lifesaving basics...", "tags": ["EMT", "emergency", "first response", "CPR", "basic life support", "patient assessment", "wound care", "trauma care", "splinting", "bleeding control"],
                        "context": "Provides foundational knowledge and skills...", "materials": ["First Aid Kit Supplies...", "Gloves...", "CPR Mask/Barrier...", "Splinting Materials...", "(Training: Mannequin)"], "processSteps": ["1. Ensure Scene Safety...", "2. Primary Assessment...", "3. Call for Help...", "4. Critical Interventions...", "5. Secondary Assessment...", "6. Splinting/Wound Dressing...", "7. Ongoing Monitoring..."],
                        "videos": []
                    },
                    {
                        "uniqueId": "health-1", "title": "Telemedicine", "description": "Use phones and simple apps...", "tags": ["health", "telemedicine", "remote care", "digital health", "remote diagnosis", "mHealth", "communication", "health access"],
                        "context": "Leverages communication technology...", "materials": ["Device...", "Internet/Phone Connectivity...", "Camera...", "Basic Measurement Tools...", "Relevant Health Apps/Platforms"], "processSteps": ["1. Identify Provider...", "2. Ensure Connectivity...", "3. Prepare for Consultation...", "4. Communicate Symptoms...", "5. Follow Medical Advice...", "6. Plan Follow-up..."],
                        "videos": []
                    },
                    {
                        "uniqueId": "health-2", "title": "First Aid", "description": "Master everyday skills...", "tags": ["first aid", "injury", "emergency", "home care", "wound care", "burns", "bites & stings", "common ailments", "hygiene"],
                        "context": "Focuses on immediate care for common injuries...", "materials": ["Well-stocked First Aid Kit...", "Clean Water...", "Cool Compresses...", "Soap"], "processSteps": ["1. Assess the Situation...", "2. Clean Wounds...", "3. Apply Dressing...", "4. Manage Minor Burns...", "5. Treat Bites/Stings...", "6. Manage Fever...", "7. Recognize When to Seek Help..."],
                        "videos": []
                    },
                    {
                        "uniqueId": "health-3", "title": "Self-sufficient Healthcare", "description": "Set up a basic first aid station...", "tags": ["health", "DIY", "self-reliance", "herbal medicine", "community health", "preventive health", "traditional medicine", "ORS", "preparedness", "hygiene", "sanitation"],
                        "context": "Empowers individuals and communities...", "materials": ["Organized Storage...", "Basic First Aid Supplies...", "Medicinal Herbs...", "Salt, Sugar, Bicarbonate...", "Clean Water & Containers...", "Notebook & Pen..."], "processSteps": ["1. Assess Local Health Issues...", "2. Create Checklist & Stock...", "3. Learn Plant Identification...", "4. Prepare ORS...", "5. Practice Hygiene...", "6. Record Keeping...", "7. Know Limitations..."],
                        "videos": []
                    }
                ]
            },
            {
                "area": "Food", "icon": "fa-utensils", "featherIcon": "coffee", // Note: Feather 'coffee' used, maybe 'package' or 'shopping-bag'?
                "subcategories": [
                    {
                        "uniqueId": "food-0", "title": "Urban Gardening", "description": "Grow healthy vegetables in small spaces...", "tags": ["urban farming", "gardening", "food security", "container gardening", "small space gardening", "rooftop garden", "balcony garden", "composting", "vertical farming", "local food"],
                        "context": "Enables food production in densely populated areas...", "materials": ["Containers...", "Potting Mix/Soil/Compost...", "Seeds or Seedlings...", "Watering Can/System...", "Fertilizer...", "Sunlight/Grow Lights"], "processSteps": ["1. Select Site...", "2. Choose Containers...", "3. Prepare Growing Medium...", "4. Planting & Seeding...", "5. Watering & Feeding...", "6. Pest/Disease Management...", "7. Harvesting..."],
                        "videos": [
                             { "title": "Organic/Biodynamic Farming in the City", "youtubeId": "QJcACw_--Nk", "description": "Explores the realities...", "icon_tag_fa": "fas fa-city", "color_tag": "#6B7280", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                             { "title": "Community Gardens as health and vitality nodes", "youtubeId": "QZQpIHIr7s0", "description": "Growing Together...", "icon_tag_fa": "fas fa-sprout", "color_tag": "#6B7280", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                             { "title": "Community Gardens address food deserts", "youtubeId": "QZQpIHIr7s0", "description": "Growing Together...", "icon_tag_fa": "fas fa-sprout", "color_tag": "#6B7280", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                        ]
                    },
                    {
                        "uniqueId": "food-1", "title": "Hydro/Aero/Aquaponics", "description": "Use water-based growing systems...", "tags": ["hydroponics", "water-efficient", "urban food", "aquaponics", "aeroponics", "soilless culture", "vertical farming", "nutrient solution", "pH management", "closed-loop system"],
                        "context": "Cultivates plants without soil...", "materials": ["Growing System Components...", "Growing Medium...", "Nutrient Solution...", "pH Testing Kit...", "EC/TDS Meter...", "(Aquaponics: fish tank...)"], "processSteps": ["1. Assemble System...", "2. Prepare Nutrient Solution...", "3. Germinate Seeds...", "4. Transplant...", "5. Monitor & Maintain...", "6. (Aquaponics: Manage fish...)", "7. Harvesting..."] ,
                        "videos": [
                             { "title": "Feed the World â€“ Aquaponics", "youtubeId": "ofS9MFXFIBE", "description": "Introduces aquaponics...", "icon_tag_fa": "fas fa-fish", "color_tag": "#3B82F6", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                             { "title": "Aquaponics Simplified: A Guide...", "youtubeId": "4DMylpQqVKI", "description": "Features 'Aqua Annie'...", "icon_tag_fa": "fas fa-seedling", "color_tag": "#10B981", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                             { "title": "Designing a Sustainable Aquaponics System: An Inventorâ€™s Touch", "youtubeId": "x6buXYuvXWg", "description": "Showcases inventor...", "icon_tag_fa": "fas fa-cogs", "color_tag": "#57534e", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                        ]
                     },
                    {
                        "uniqueId": "food-2", "title": "Sustainable Agriculture Techniques", "description": "Practice crop rotation, natural pest control...", "tags": ["agriculture", "sustainable", "soil health", "permaculture", "organic farming", "agroecology", "cover cropping", "crop rotation", "integrated pest management", "conservation agriculture", "biodiversity", "seed saving"],
                        "context": "Employs ecological principles to farming...", "materials": ["Compost/Manure...", "Cover Crop Seeds...", "Mulch Materials...", "Natural Pest Control Agents...", "Diverse Crop Seeds...", "Soil Testing Kit..."], "processSteps": ["1. Soil Health Assessment...", "2. Implement Crop Rotation...", "3. Utilize Cover Cropping...", "4. Practice IPM...", "5. Enhance Biodiversity...", "6. Water Conservation...", "7. Nutrient Management..."],
                        "videos": [
                            { "icon_tag_fa": "fas fa-sync-alt", "color_tag": "#ca8a04", "title": "Crop Rotation Explained: Benefits & Planning", "youtubeId": "QhH-YsDr8D4", "description": "Understanding how rotating crops...", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-shield-alt", "color_tag": "#dc2626", "title": "Natural Pest Control Methods for Gardens", "youtubeId": "tgQ1L7TcDjQ", "description": "Using companion planting...", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-leaf", "color_tag": "#16a34a", "title": "Cover Cropping for Beginners: Building Soil", "youtubeId": "NbvDEAomVlk", "description": "How to choose, plant, and manage...", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-tractor", "color_tag": "#78350f", "title": " How to Start a No-Till Garden from Scratch ", "youtubeId": "sdmqbhQo-yw", "description": "how to start a garden...", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-tractor", "color_tag": "#78350f", "title": "Introduction to No-Till Farming Techniques", "youtubeId": "0xvp8sWY6Fk", "description": "Minimizing soil disturbance...", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                            { "icon_tag_fa": "fas fa-seedling", "color_tag": "#fbbf24", "title": "Seed Saving Basics for Common Vegetables", "youtubeId": "wB8Z4LnHJ8I", "description": "How to collect, process, and store seeds...", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                        ]
                    },
                    {
                        "uniqueId": "food-3", "title": "Fungi, Algae, Insects, & Tech", "description": "Inventory and evaluation of modern...", "tags": ["alternative protein", "future food", "mycology", "entomophagy", "algae", "spirulina", "BSFL", "insect farming", "mushroom cultivation", "food technology", "fermentation", "nutrition", "mycoprotein"],
                        "context": "Explores less conventional but potentially highly sustainable...", "materials": ["Mushroom Spawn/Substrate...", "Algae Culture...", "Insect Starter Colony...", "Containers/Enclosures...", "Harvesting Tools...", "Processing Equipment..."], "processSteps": ["1. Select Organism...", "2. Set Up Environment...", "3. Inoculation/Starting...", "4. Feeding & Maintenance...", "5. Harvesting...", "6. Processing..."],
                         "videos": [
                              { "title": "Fungi", "youtubeId": "QJcACw_--Nk", "description": "Explores the realities...", "icon_tag_fa": "fas fa-city", "color_tag": "#6B7280", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Fungi as Edible Mycelium", "youtubeId": "ofS9MFXFIBE", "description": "Mycelial cake can be dried...", "icon_tag_fa": "fas fa-utensils", "color_tag": "#3B82F6", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Fungi in soil and ecosystem health", "youtubeId": "4DMylpQqVKI", "description": "Explores the role of fungal networks...", "icon_tag_fa": "fas fa-seedling", "color_tag": "#10B981", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Fungi for creating structural compoments", "youtubeId": "x6buXYuvXWg", "description": "Using mycelium (fungal roots)...", "icon_tag_fa": "fas fa-cogs", "color_tag": "#57534e", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Fungi Algae (Lichens)", "youtubeId": "mD5jnxhne7o", "description": "Introduction to lichens...", "icon_tag_fa": "fas fa-tree", "color_tag": "#ca8a04", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Fungi eating insects so people can eat it (Entomopathogenic Fungi)", "youtubeId": "5eibeYxRt5w", "description": "Explores fungi that naturally control...", "icon_tag_fa": "fas fa-bug-slash", "color_tag": "#7c2d12", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Is Microalgae the Sustainable Food of the Future?", "youtubeId": "VFNS7Is6Td0", "description": "Investigates microalgae...", "icon_tag_fa": "fas fa-bacteria", "color_tag": "#0d9488", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Mushroom Farming Basics", "youtubeId": "9IFTMnftLgU", "description": "Growing edible mushrooms...", "icon_tag_fa": "fas fa-cloud", "color_tag": "#a1a1aa", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Spirulina Micro-Farming at Home", "youtubeId": "SMUf_pbxkcU", "description": "Small-scale production...", "icon_tag_fa": "fas fa-vial", "color_tag": "#2dd4bf", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Insect Farming: Cricket Rearing Systems", "youtubeId": "jp6OgNyTxA0", "description": "Setting up efficient cricket production...", "icon_tag_fa": "fas fa-bug", "color_tag": "#3f3f46", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Black Soldier Fly Larvae Composting", "youtubeId": "5j0YCyg0vpE", "description": "Converting organic waste...", "icon_tag_fa": "fas fa-recycle", "color_tag": "#166534", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Ancient Grain Recovery and Cultivation", "youtubeId": "Xqn490UuVQU", "description": "Growing forgotten but nutritious...", "icon_tag_fa": "fas fa-wheat-awn", "color_tag": "#f59e0b", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] },
                              { "title": "Simple Automation for Small-Scale Agriculture", "youtubeId": "eHMpkXiGEag", "description": "Low-tech solutions...", "icon_tag_fa": "fas fa-robot", "color_tag": "#78716c", "localVideoFilename": "", "authors": "", "researchReviewItems": [], "contentCreatorArchive": "", "licence": "Standard YouTube License", "patreon": "", "socials": {}, "fundraiser": "", "sponsorPages": [] }
                         ]
                     }
                ]
            } // End of Food Area
        ]; // End of categoryData array


        // --- Updated Glossary ---
    const tagGlossary = {
            // Shelter
            "construction": "The process, art, or business of building structures.",
            "low-cost": "Achievable with minimal financial resources or expenditure.",
            "durable": "Able to withstand wear, pressure, or damage over time; long-lasting.",
            "building": "A structure with walls and a roof, such as a house, school, or factory.",
            "DIY": "Do It Yourself; projects undertaken without direct professional help.",
            "resilience": "The capacity to withstand or recover quickly from difficulties; toughness.",
            "earthbag": "A construction technique using bags filled primarily with soil or earth.",
            "bamboo": "A tall, fast-growing grass often used as a strong, sustainable building material.",
            "superadobe": "A form of earthbag construction using long fabric tubes and barbed wire, developed by Nader Khalili.",
            "materials": "The matter from which a thing is or can be made.",
            "local": "Relating or restricted to a particular area or neighbourhood.",
            "sustainability": "Meeting present needs without compromising the ability of future generations to meet theirs, often focusing on environmental, social, and economic balance.",
            "earthship": "A type of passive solar house made of natural and recycled materials (like tires and bottles).",
            "vernacular architecture": "Architecture concerned with domestic and functional rather than public or monumental buildings, often using local materials and traditional methods.",
            "resourcefulness": "The ability to find quick and clever ways to overcome difficulties, especially with limited resources.",
            "clay": "A stiff, sticky fine-grained earth, typically yellow, red, or bluish-gray, often used in building (adobe, cob, plaster).",
            "stone": "Hard solid nonmetallic mineral matter of which rock is made, used for building.",
            "salvaged": "Retrieved or saved from potential waste or loss for reuse.",
            "natural building": "Building methods emphasizing sustainability and the use of minimally processed, natural materials.",
            "climate resilience": "The ability of a structure or system to absorb stresses and maintain function in the face of climate change impacts.",
            "insulation": "Material used to prevent heat, sound, or electricity from passing through something.",
            "foundation": "The lowest load-bearing part of a building, typically below ground level.",
            "roofing": "The material forming the roof of a building, or the process of constructing a roof.",
            "pallet wood": "Wood reclaimed from shipping pallets, often used in low-cost construction.",

            // Water
            "clean water": "Water that is safe to drink (potable) and for other domestic uses, free from harmful contaminants.",
            "filtration": "The process of removing solid particles from a liquid or gas using a filter medium.",
            "health": "The state of being free from illness or injury; relates to practices promoting well-being.",
            "SODIS": "Solar Water Disinfection: A simple method using sunlight and clear PET bottles to kill harmful microbes in water.",
            "potable water": "Water that is safe to drink.",
            "waterborne disease": "Illnesses caused by pathogenic microorganisms transmitted through contaminated water.",
            "DIY filter": "A water filter constructed using readily available or improvised materials.",
            "boiling": "Purifying water by heating it to its boiling point to kill most pathogens.",
            "disinfection": "The process of cleaning something, especially with a chemical, in order to destroy bacteria and other microorganisms.",
            "desalination": "The process of removing salt and other minerals from seawater or brackish water.",
            "salt removal": "Synonym for desalination.",
            "ocean": "A very large expanse of saltwater.",
            "irrigation": "The supply of water to land or crops to help growth, typically by means of channels or pipes.",
            "solar still": "A device using solar energy to evaporate and condense water for purification/desalination.",
            "distillation": "The action of purifying a liquid by a process of heating and cooling.",
            "coastal living": "Relating to life near the coast.",
            "arid regions": "Areas characterized by severe lack of available water, hindering plant and animal life.",
            "pipes": "Tubes used to convey water, gas, oil, or other fluid substances.",
            "delivery": "The action of transporting something to a destination.",
            "infrastructure": "The basic physical structures and facilities (e.g., pipes, tanks) needed for water systems.",
            "gravity feed": "A system where liquid flows due to gravity from a higher to lower point without pumping.",
            "water storage": "Holding water in tanks, reservoirs, or cisterns for later use.",
            "pump": "A mechanical device using suction or pressure to raise or move liquids.",
            "conservation": "The careful preservation and protection of something, especially water resources.",
            "ram pump": "A cyclic water pump powered by hydropower, using the water hammer effect.",
            "water pressure": "The force exerted by water per unit area.",
            "water testing": "Analyzing water samples to determine quality and safety.",
            "water acquisition": "Methods of obtaining water from various sources.",
            "atmospheric water": "Water present in the atmosphere, collectable as dew or fog.",
            "fog harvesting": "Collecting water from fog using nets or other surfaces.",
            "plumbing": "The system of pipes, tanks, fittings, and other apparatus required for the water supply, heating, and sanitation in a building.",
            "solar thermal": "Technology using sunlight to generate thermal energy (heat).",


            // Waste
            "composting": "The process of decomposing organic matter into a nutrient-rich soil amendment.",
            "organic waste": "Biodegradable waste from plant or animal sources (e.g., food scraps, yard trimmings).",
            "soil improvement": "Enhancing soil structure, fertility, and water retention.",
            "fertilizer": "A chemical or natural substance added to soil or land to increase its fertility.",
            "vermicomposting": "Composting using various species of worms (e.g., red wigglers).",
            "hot composting": "A method managing C:N ratio, moisture, and aeration to achieve high temperatures (130-160Â°F / 55-70Â°C) for fast decomposition.",
            "cold composting": "A passive composting method involving less management and slower decomposition at ambient temperatures.",
            "bokashi": "An anaerobic fermentation process, often for kitchen scraps, using specific microbes.",
            "nutrient cycling": "The movement and exchange of organic and inorganic matter back into the production of living matter.",
            "recycling": "Converting waste materials into new materials and objects.",
            "waste sorting": "Separating different types of waste for proper disposal or recycling.",
            "materials recovery": "Retrieving useful materials from the waste stream.",
            "circular economy": "An economic system aimed at eliminating waste and the continual use of resources.",
            "community action": "Activities undertaken by people in a geographic locality to improve their community.",
            "plastic recycling": "Reprocessing waste plastic into new products.",
            "paper recycling": "Reprocessing waste paper into new paper products.",
            "metal recycling": "Reprocessing scrap metal into new metal.",
            "glass recycling": "Reprocessing waste glass into new glass products.",
            "waste management": "The collection, transport, processing, recycling or disposal of waste materials.",
            "upcycling": "Reusing discarded objects or material to create a product of higher quality or value.",
            "creative reuse": "Synonym for upcycling, emphasizing the imaginative transformation.",
            "waste reduction": "Minimizing the amount of waste produced.",
            // "DIY": (Defined under Shelter)
            "crafts": "Activities involving skill in making things by hand.",
            "zero waste": "A philosophy encouraging redesign of resource life cycles so all products are reused; goal is no trash sent to landfills/incinerators.",
            "repurposing": "Adapting an item for use in a different way.",
            "wastewater": "Water that has been used in homes, businesses, or industrial processes.",
            "greywater": "Wastewater from baths, sinks, washing machines, etc. (excluding toilet waste).",
            "blackwater": "Wastewater containing fecal matter and urine (from toilets).",
            "sanitation": "Conditions relating to public health, especially the provision of clean drinking water and adequate sewage disposal.",
            "treatment": "Application of methods to improve the quality or condition of something (e.g., wastewater).",
            "constructed wetland": "An artificial wetland engineered to treat wastewater using natural processes.",
            "reed bed": "A type of constructed wetland specifically using reeds.",
            "hygiene": "Conditions or practices conducive to maintaining health and preventing disease, especially through cleanliness.",
            "bioremediation": "Using living organisms (microbes, plants) to remove pollutants from soil or water.",
            "water reuse": "Using treated wastewater for beneficial purposes like irrigation or industrial processes.",
            "anaerobic digestion": "Breakdown of organic matter by microorganisms in the absence of oxygen.",
            "resource recovery": "Extracting useful materials or energy from waste.",

            // Energy
            "solar cooker": "An appliance using direct sunlight for heating or cooking.",
            "cooking technology": "Methods and equipment used for preparing food with heat.",
            "off-grid": "Not connected to public utilities, especially the main electrical grid.",
            "passive solar": "Building design or technology that uses sunlight for heating/cooling without active mechanical systems.",
            "appropriate technology": "Technology suited to the social, economic, and environmental context it is intended for.",
            "fuel efficiency": "Measure of how effectively a device converts energy in a fuel source into useful output.",
            "biogas": "Gaseous fuel, especially methane, produced by the fermentation of organic matter.",
            "waste": "Unwanted or unusable material, substances, or by-products.", // Added specific definition for this context
            "energy": "Power derived from the utilization of physical or chemical resources.", // Added specific definition
            "renewable": "Energy from a source that is not depleted when used (e.g., wind, solar).",
            "cooking fuel": "Material burned to produce heat for cooking.",
            "waste to energy": "Process of generating energy (electricity/heat) from waste.",
            "methane": "A colorless, odorless flammable gas (CH4), the main constituent of natural gas and biogas.",
            "digestate": "The nutrient-rich material remaining after anaerobic digestion.",

            "microgrid": "A localized group of electricity sources and loads that normally operates connected to and synchronous with the traditional wide area grid, but can disconnect and function autonomously.",

            "renewable energy": "Energy from naturally replenished resources (solar, wind, hydro, geothermal, biomass).",
            "off-grid power": "Electricity generation independent of the public utility grid.",
            "community power": "Energy projects owned or controlled by local community members.",
            "solar": "Relating to or derived from the sun's rays.", // Added specific definition
            "wind power": "Energy generated from wind using wind turbines.",
            "battery storage": "Storing electrical energy chemically in batteries for later use.",
            "energy access": "Availability of modern energy services.",
            // "resilience": (Defined under Shelter)
            // "upcycling": (Defined under Waste)
            "home heating": "Systems used to heat domestic dwellings.",
            "biomass": "Organic matter from plants and animals used as a fuel source.",
            "briquettes": "Compressed blocks of combustible biomass material used as fuel.",
            "electricity generation": "The process of producing electric energy from other forms of energy.",
            "fuel": "Material such as coal, gas, or oil that is burned to produce heat or power.",


            // Health
            "EMT": "Emergency Medical Technician; trained to provide out-of-hospital emergency care.",
            "emergency": "A serious, unexpected, and often dangerous situation requiring immediate action.",
            "first response": "The initial care provided by first responders at the scene of an emergency.",
            "CPR": "Cardiopulmonary Resuscitation: an emergency procedure involving chest compressions and artificial ventilation.",
            "basic life support": "Level of medical care for victims of life-threatening illnesses/injuries until full medical care can be given.",
            "patient assessment": "Systematic collection of information about a patient's condition.",
            "wound care": "Treating wounds to promote healing and prevent infection.",
            "trauma care": "Medical care for patients suffering from major traumatic injuries.",
            "splinting": "Using a rigid support to immobilize a fractured or injured limb.",
            "bleeding control": "Methods used to stop or slow down severe bleeding.",
            // "health": (Defined under Water)
            "telemedicine": "Remote diagnosis and treatment of patients by means of telecommunications technology.",
            "remote care": "Healthcare services provided when the patient and provider are not physically present together.",
            "digital health": "Use of information and communication technologies for health.",
            "remote diagnosis": "Identifying the nature of an illness remotely.",
            "mHealth": "Mobile Health; practice of medicine and public health supported by mobile devices.",
            "communication": "The imparting or exchanging of information.",
            "health access": "The timely use of personal health services to achieve the best health outcomes.",
            "first aid": "Help given to a sick or injured person until full medical treatment is available.",
            "injury": "Physical harm or damage to someone's body.",
            // "emergency": (Defined above)
            "home care": "Medical or personal care provided in a patient's home.",
            // "wound care": (Defined above)
            "burns": "Injuries caused by exposure to heat, flame, chemicals, radiation, or electricity.",
            "bites & stings": "Injuries caused by insects, animals, or marine life.",
            "common ailments": "Frequently occurring minor illnesses or disorders.",
            // "hygiene": (Defined under Waste)
            // "DIY": (Defined under Shelter)
            "self-reliance": "Reliance on one's own powers and resources rather than those of others.",
            "herbal medicine": "Using plants or plant extracts for medicinal purposes.",
            "community health": "Field concerned with studying and improving the health characteristics of communities.",
            "preventive health": "Measures taken to prevent diseases rather than curing them or treating symptoms.",
            "traditional medicine": "Health practices, knowledge, and beliefs incorporating plant, animal, and mineral based medicines, spiritual therapies, etc., used in maintenance of health.",
            "ORS": "Oral Rehydration Solution: A mixture of water, salt, and sugar used to treat dehydration.",
            "preparedness": "A state of readiness, especially for emergencies.",
            // "sanitation": (Defined under Waste)
            "diagnosis": "The identification of the nature of an illness or other problem by examination of the symptoms.",
            "treatment": "Medical care given to a patient for an illness or injury.",


            // Food
            "urban farming": "Practice of cultivating, processing, and distributing food in or around urban areas.",
            "gardening": "The activity of tending and cultivating a garden.",
            "food security": "State of having reliable access to a sufficient quantity of affordable, nutritious food.",
            "container gardening": "Growing plants exclusively in containers instead of planting them in the ground.",
            "small space gardening": "Techniques for growing plants in limited areas like balconies or patios.",
            "rooftop garden": "A garden cultivated on the roof of a building.",
            "balcony garden": "A garden cultivated on a balcony.",
            // "composting": (Defined under Waste)
            "vertical farming": "Practice of growing crops in vertically stacked layers, often indoors.",
            "local food": "Food that is produced, processed, and consumed within a certain geographic region.",
            "hydroponics": "Method of growing plants without soil, using mineral nutrient solutions in aqueous solvents.",
            "water-efficient": "Using water resources in the most effective manner possible.",
            "urban food": "Food grown or produced within city limits.",
            "aquaponics": "System combining aquaculture (raising fish) and hydroponics (soilless plant culture) symbiotically.",
            "aeroponics": "Growing plants in an air or mist environment without soil or an aggregate medium.",
            "soilless culture": "Growing plants without soil (includes hydroponics, aeroponics).",
            // "vertical farming": (Defined above)
            "nutrient solution": "Water containing dissolved inorganic nutrients, used in hydroponics.",
            "pH management": "Controlling the acidity or alkalinity of water or soil.",
            "closed-loop system": "System where outputs (like waste) are reused as inputs, minimizing waste (e.g., aquaponics).",
            "agriculture": "The science or practice of farming, including cultivation of the soil for growing crops and rearing animals.",
            // "sustainable": (Defined under Shelter)
            "soil health": "The continued capacity of soil to function as a vital living ecosystem.",
            "permaculture": "Development of agricultural ecosystems intended to be sustainable and self-sufficient.",
            "organic farming": "Farming system avoiding the use of synthetic fertilizers, pesticides, and GMOs.",
            "agroecology": "Study of ecological processes applied to agricultural production systems.",
            "cover cropping": "Planting crops to cover the soil rather than for harvest, improving soil health.",
            "crop rotation": "Growing different crops in succession on the same land to preserve soil fertility.",
            "integrated pest management": "Ecosystem-based strategy focusing on long-term prevention of pests through biological control, habitat manipulation, etc.",
            "conservation agriculture": "Farming system promoting minimum soil disturbance, permanent soil cover, and crop species diversification.",
            "biodiversity": "The variety of plant and animal life in the world or in a particular habitat.",
            "seed saving": "Practice of saving seeds from open-pollinated plants for use from year to year.",
            "alternative protein": "Proteins sourced from plants, insects, algae, fungi, or cell culture rather than traditional animal agriculture.",
            "future food": "Foods expected to become more common due to sustainability, nutrition, or technology.",
            "mycology": "The scientific study of fungi.",
            "entomophagy": "The practice of eating insects.",
            "algae": "Simple non-flowering aquatic plants including seaweeds and many single-celled forms.",
            "spirulina": "A biomass of cyanobacteria (blue-green algae) consumable by humans and animals.",
            "BSFL": "Black Soldier Fly Larvae; insects used for composting waste and as animal feed.",
            "insect farming": "Raising insects for human consumption, animal feed, or other products.",
            "mushroom cultivation": "The process of growing mushrooms.",
            "food technology": "Application of food science to the selection, preservation, processing, packaging, distribution, and use of safe food.",
            "fermentation": "Chemical breakdown of a substance by bacteria, yeasts, or other microorganisms, often involving effervescence and heat.",
            "nutrition": "Process of providing or obtaining the food necessary for health and growth.",
            "mycoprotein": "Protein derived from fungi, often produced through fermentation.",
            "food sovereignty": "Right of peoples to healthy and culturally appropriate food produced through ecologically sound methods, and their right to define their own food/agriculture systems.",
            "soil science": "Study of soil as a natural resource, including formation, classification, and mapping.",
            "pest management": "Controlling pests (insects, diseases, weeds) that interfere with human activities.",
            "harvesting": "The process or period of gathering in crops.",
            "food preservation": "Techniques to prevent food spoilage (drying, canning, freezing, fermenting).",

        };

        // --- Global Variables & DOM Elements ---
        // const buttonBar = document.getElementById('button-bar'); // No longer needed
        const modulesGridContainer = document.getElementById('modules-grid-container'); // Get homepage grid container
        const modulesGrid = modulesGridContainer.querySelector('.modules-grid'); // Get the grid itself
        const categoryContentContainer = document.getElementById('category-content-container'); // Get the container for detailed view
        const backToModulesButton = document.getElementById('back-to-modules-button'); // Get the back button
        const categoryTitleDisplay = document.getElementById('category-title-display');
        const glossaryPanel = document.getElementById('glossary-panel');
        const megamenuContent = document.getElementById('megamenu-content'); // Container within category view
        const megamenuColumnsContainer = document.getElementById('megamenu-columns');
        const megamenuDetailsArea = document.getElementById('megamenu-details-area');
        const bodyElement = document.body;
        // Video Panel Elements
        const videoInfoPanel = document.getElementById('video-info-panel');
        const infoUrlEl = document.getElementById('info-url');
        const infoTitleEl = document.getElementById('info-title');
        const infoDescriptionEl = document.getElementById('info-description');
        const placeholderText = '<span class="placeholder-text">Hover over a video square...</span>';
        // Local Video Elements
        const localVideoRow = document.getElementById('local-video-row');
        const localVideoLink = document.getElementById('local-video-link');
        const localVideoThumb = document.getElementById('local-video-thumb');
        const localVideoFilenameDisplay = document.getElementById('local-video-filename-display');


        // let currentlyOpenTrigger = null; // No longer needed for header buttons
        let activeSubcategoryToggle = null;
        let activeGlossaryTrigger = null;
        let allVideosFlat = []; // For flattened video data
        let currentArea = null; // Track the currently displayed area

        // --- Video Panel Functions ---
        function flattenVideoData(originalData) {
            let flatIndex = 0;
            allVideosFlat = []; // Reset
            originalData.forEach(area => {
                if (area.subcategories && Array.isArray(area.subcategories)) {
                    area.subcategories.forEach((subcat) => {
                        if (subcat.videos && Array.isArray(subcat.videos)) {
                            subcat.videos.forEach((video) => {
                                if (video && video.youtubeId) {
                                    video.icon_tag_fa = video.icon_tag_fa || 'fas fa-video';
                                    video.color_tag = video.color_tag || '#6c757d';
                                    video.authors = video.authors || "";
                                    video.researchReviewItems = video.researchReviewItems || [];
                                    video.contentCreatorArchive = video.contentCreatorArchive || "";
                                    video.licence = video.licence || "Standard YouTube License";
                                    video.patreon = video.patreon || "";
                                    video.socials = video.socials || {};
                                    video.fundraiser = video.fundraiser || "";
                                    video.sponsorPages = video.sponsorPages || [];
                                    video.localVideoFilename = video.localVideoFilename || "";
                                    video.flat_index = flatIndex++;
                                    allVideosFlat.push(video);
                                } else { console.warn(`Skipping invalid video entry: ${subcat.title}`, video); }
                            });
                        }
                    });
                } else { console.warn(`Area "${area.area}" missing subcategories.`); }
            });
             console.log(`Flattened ${allVideosFlat.length} videos.`);
        }

        function showInfoPanel(video) {
             if (!video || !video.youtubeId) { hideInfoPanel(); return; } // Hide if invalid video

             // Local Video Row
             if (video.localVideoFilename && localVideoRow && localVideoLink && localVideoThumb && localVideoFilenameDisplay) {
                 const videoPath = `/assets/video/${video.localVideoFilename}`;
                 const thumbPath = `/assets/video/thumbnails/${video.localVideoFilename.replace(/\.[^/.]+$/, "")}.jpg`;
                 localVideoLink.href = videoPath;
                 localVideoThumb.src = thumbPath;
                 localVideoThumb.alt = `Thumbnail for ${video.title}`;
                 localVideoFilenameDisplay.textContent = video.localVideoFilename;
                 localVideoRow.classList.add('visible');
             } else if(localVideoRow) {
                 localVideoRow.classList.remove('visible');
             }

             // YouTube Info Row
             const youtubeWatchUrl = `https://www.youtube.com/watch?v={video.youtubeId}`; // Use the correct link structure
             infoUrlEl.textContent = youtubeWatchUrl;
             infoUrlEl.href = youtubeWatchUrl; // Make clickable
             infoUrlEl.classList.remove('placeholder-text');
             infoTitleEl.textContent = video.title || 'No Title';
             infoDescriptionEl.textContent = video.description || 'No Description';

             videoInfoPanel.classList.add('visible');
         }

        function hideInfoPanel() {
            infoUrlEl.innerHTML = placeholderText; infoUrlEl.removeAttribute('href');
            infoTitleEl.textContent = ''; infoDescriptionEl.textContent = '';
            if (localVideoRow) { localVideoRow.classList.remove('visible'); }
            if (localVideoLink) { localVideoLink.href = '#'; }
            if (localVideoThumb) { localVideoThumb.src = 'https://placehold.co/40x40/fef9c3/713f12?text=MP4'; localVideoThumb.alt = 'Local Video Thumbnail'; }
            if (localVideoFilenameDisplay) { localVideoFilenameDisplay.textContent = ''; }
            videoInfoPanel.classList.remove('visible');
        }

function generateHomepageModules() {
    modulesGrid.innerHTML = '';
    categoryData.forEach(category => {
        const moduleDiv = document.createElement('div');
        moduleDiv.className = `module ${category.area.toLowerCase()}`;
        moduleDiv.onclick = () => showCategoryView(category.area.toLowerCase());

        const iconContainer = document.createElement('div');
        iconContainer.className = 'icon';
        
        // Try Feather first, fall back to Font Awesome
        try {
            if (typeof feather !== 'undefined' && feather.icons && category.featherIcon && feather.icons[category.featherIcon]) {
                // Use direct SVG insertion from feather
                iconContainer.innerHTML = feather.icons[category.featherIcon].toSvg();
            } else {
                // Fallback to Font Awesome
                iconContainer.innerHTML = `<i class="fas ${category.icon}"></i>`;
            }
        } catch(e) {
            console.error("Error with Feather icon, falling back to Font Awesome", e);
            iconContainer.innerHTML = `<i class="fas ${category.icon}"></i>`;
        }

        const titleH2 = document.createElement('h2');
        titleH2.textContent = category.area;

        moduleDiv.appendChild(iconContainer);
        moduleDiv.appendChild(titleH2);
        modulesGrid.appendChild(moduleDiv);
    });
}

  function initializeSlideshows() {
        document.querySelectorAll('.featured-slideshow').forEach(slideshow => {
            const slides = slideshow.querySelectorAll('.slideshow-slide');
            const prevBtn = slideshow.querySelector('.slideshow-prev');
            const nextBtn = slideshow.querySelector('.slideshow-next');
            const dots = slideshow.querySelectorAll('.slideshow-dot');
            let currentIndex = 0;
            let intervalId = null;
            
            // Function to show a specific slide
            function showSlide(index) {
                // Handle index bounds
                if (index >= slides.length) index = 0;
                if (index < 0) index = slides.length - 1;
                
                // Update current index
                currentIndex = index;
                
                // Update slides
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === currentIndex);
                });
                
                // Update dots
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === currentIndex);
                });
                
                // Load the image if it hasn't been loaded yet (lazy loading)
                const currentSlide = slides[currentIndex];
                const img = currentSlide.querySelector('img');
                const dataSrc = img.getAttribute('data-src');
                
                if (dataSrc && img.src !== dataSrc) {
                    img.src = dataSrc;
                }
                
                // Reset the auto-advance timer
                if (intervalId) {
                    clearInterval(intervalId);
                    startAutoAdvance();
                }
            }
            
            // Function to advance to the next slide
            function nextSlide() {
                showSlide(currentIndex + 1);
            }
            
            // Function to go back to the previous slide
            function prevSlide() {
                showSlide(currentIndex - 1);
            }
            
            // Function to start auto-advancing slides
            function startAutoAdvance() {
                intervalId = setInterval(nextSlide, 5000); // Change slide every 5 seconds
            }
            
            // Set up click handlers for controls
            if (prevBtn) prevBtn.addEventListener('click', prevSlide);
            if (nextBtn) nextBtn.addEventListener('click', nextSlide);
            
            // Set up click handlers for dots
            dots.forEach((dot, i) => {
                dot.addEventListener('click', () => showSlide(i));
            });
            
            // Set up keyboard navigation
            slideshow.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') prevSlide();
                else if (e.key === 'ArrowRight') nextSlide();
            });
            
            // Make slideshow focusable for keyboard navigation
            slideshow.setAttribute('tabindex', '0');
            
            // Start auto-advance
            startAutoAdvance();
            
            // Pause auto-advance when user hovers over the slideshow
            slideshow.addEventListener('mouseenter', () => {
                if (intervalId) {
                    clearInterval(intervalId);
                    intervalId = null;
                }
            });
            
            // Resume auto-advance when user leaves the slideshow
            slideshow.addEventListener('mouseleave', () => {
                if (!intervalId) {
                    startAutoAdvance();
                }
            });
            
            // Load the first image immediately
            const firstImg = slides[0].querySelector('img');
            const firstDataSrc = firstImg.getAttribute('data-src');
            if (firstDataSrc) {
                firstImg.src = firstDataSrc;
            }
            
            // Show the first slide
            showSlide(0);
        });
    }
    


        

        // --- Show/Hide Views ---
function showCategoryView(area) {
    console.log("Showing category:", area);
    
    // Normalize area to lowercase
    area = area.toLowerCase();
    
    // Store current area
    currentArea = area; 
    
    // Find the category object
    const category = categoryData.find(cat => cat.area.toLowerCase() === area);
    
    if (category) {
        // Show the category title
        showCategoryTitle(category);
        
        // Populate the content columns for this area
        populateMegamenuColumns(area);
        
        // Hide the homepage modules grid
        modulesGridContainer.style.display = 'none'; 
        
        // Show the category content container
        categoryContentContainer.classList.add('visible');
        
        // Update hash if it's not already set correctly
        if (window.location.hash.substring(1).toLowerCase() !== area) {
            window.location.hash = area;
        }
        
        // Scroll to top for better user experience
        window.scrollTo(0, 0);
    } else {
        console.error(`Category not found: ${area}`);
    }
}

        function showHomepageView() {
             console.log("Showing homepage grid");
             currentArea = null; // Reset current area
             hideSubcategoryDetails(false); // Ensure details are hidden
             hideGlossaryPanel();
             hideCategoryTitle();
             modulesGridContainer.style.display = 'block'; // Show module grid
             categoryContentContainer.classList.remove('visible'); // Hide category content
             history.pushState("", document.title, window.location.pathname + window.location.search); // Clear hash
        }

        // --- Populate Megamenu Columns (Adapted - No Major Changes Needed) ---
        function populateMegamenuColumns(area) {
             const category = categoryData.find(cat => cat.area.toLowerCase() === area);
             if (!category) {
                 megamenuColumnsContainer.innerHTML = '<div class="text-center text-gray-500 col-span-1 md:col-span-3">Category data not found.</div>';
                 return;
             }
             megamenuColumnsContainer.innerHTML = ''; // Clear previous columns
             megamenuColumnsContainer.classList.remove('columns-hidden'); // Ensure columns are potentially visible
             hideSubcategoryDetails(false); // Ensure details area is hidden when showing columns

             const columns = [[], [], []];
             category.subcategories.forEach((subcat, index) => {
                  subcat.uniqueId = subcat.uniqueId || `${area}-${index}`;
                  columns[index % 3].push(subcat);
             });

             columns.forEach((columnSubcats) => {
                 const columnDiv = document.createElement('div');
                 columnDiv.className = 'space-y-6';
                 if (columnSubcats.length > 0) {
                     columnSubcats.forEach((subcat) => {
                         const itemDiv = document.createElement('div');
                         itemDiv.className = 'subcategory-item';
                         let tagsHtml = '';
                         if (subcat.tags && subcat.tags.length > 0) {
                             tagsHtml = '<div class="mt-2 flex flex-wrap gap-1">' +
                                 subcat.tags.map(tag =>
                                     `<button class="tag-pill-button glossary-trigger" data-tag="${tag.toLowerCase()}">${tag}</button>`
                                 ).join('') + '</div>';
                         }
                         itemDiv.innerHTML = `
                             <h4 class="text-md font-semibold text-gray-800 mb-1">${subcat.title}</h4>
                             <p class="text-sm text-gray-600">${subcat.description}</p>
                             ${tagsHtml}
                             <button class="subcategory-toggle text-sm text-blue-600 hover:text-blue-800 hover:underline mt-3" data-area="${area}" data-uniqueid="${subcat.uniqueId}">
                                 Show More Info
                             </button>`;
                         columnDiv.appendChild(itemDiv);
                     });
                 } else {
                     // Add placeholder if column is empty? Optional.
                     // columnDiv.innerHTML = '<div class="text-gray-400 text-sm italic">No items</div>';
                 }
                 megamenuColumnsContainer.appendChild(columnDiv);
             });
         }

        // --- Glossary Functions ---
        function displayGlossaryEntry(tag) { /* ... (no changes) ... */
            const definition = tagGlossary[tag] || "Definition not found for this tag.";
            const term = tag.charAt(0).toUpperCase() + tag.slice(1);
            glossaryPanel.innerHTML = `
                <button class="glossary-close-button" aria-label="Close glossary">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /> </svg>
                </button>
                <h4 class="font-semibold text-lg text-white mb-1 pr-8">${term}</h4>
                <p class="text-sm text-gray-300">${definition}</p>
            `;
            glossaryPanel.querySelector('.glossary-close-button').addEventListener('click', hideGlossaryPanel);
            glossaryPanel.classList.add('visible');
            bodyElement.classList.add('glossary-visible'); // Keep this class for potential styling needs
        }
        function hideGlossaryPanel() { /* ... (no changes) ... */
            glossaryPanel.classList.remove('visible');
            bodyElement.classList.remove('glossary-visible');
            if (activeGlossaryTrigger) { activeGlossaryTrigger.classList.remove('active'); activeGlossaryTrigger = null; }
            setTimeout(() => { if (!glossaryPanel.classList.contains('visible')) { glossaryPanel.innerHTML = '<p class="text-center text-gray-400">Click a tag to see its definition.</p>'; } }, 400);
        }
        function handleGlossaryTriggerClick(event) { /* ... (no changes) ... */
             event.stopPropagation();
            const currentButton = event.target;
            const tag = currentButton.dataset.tag;
            if (activeGlossaryTrigger === currentButton) { hideGlossaryPanel(); }
            else { if (activeGlossaryTrigger) { activeGlossaryTrigger.classList.remove('active'); } displayGlossaryEntry(tag); currentButton.classList.add('active'); activeGlossaryTrigger = currentButton; }
        }

        // --- Subcategory Details Functions ---
        function displaySubcategoryDetails(area, uniqueId, updateHash = true) {
             const category = categoryData.find(cat => cat.area.toLowerCase() === area);
             const currentSubcategory = category?.subcategories.find(sub => sub.uniqueId === uniqueId);
             if (!category || !currentSubcategory) { megamenuDetailsArea.innerHTML = '<p>Details not found.</p>'; megamenuDetailsArea.classList.add('visible'); return; }

             let siblingLinksHtml = '';
             if (category.subcategories && category.subcategories.length > 1) {
                 siblingLinksHtml = '<div class="sibling-links-container"><span>See also: </span>';
                 category.subcategories.forEach(subcat => {
                     if (!subcat.uniqueId) { console.warn("Missing uniqueId:", subcat.title); return; }
                     const isCurrent = subcat.uniqueId === uniqueId;
                     siblingLinksHtml += `<button class="sibling-link-pill ${isCurrent ? 'current' : ''}" data-area="${area}" data-uniqueid="${subcat.uniqueId}" ${isCurrent ? 'disabled' : ''}>${subcat.title}</button>`;
                 });
                 siblingLinksHtml += '</div>';
             }

             let detailsHtml = `
                 <h3 class="text-xl font-semibold text-gray-800 mb-3">${currentSubcategory.title}</h3>
                 ${siblingLinksHtml}
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                     <div><h5 class="font-semibold text-md text-gray-700 mb-2 border-b pb-1">Context</h5><p class="text-sm text-gray-600">${currentSubcategory.context || '...'}</p></div>
                     <div><h5 class="font-semibold text-md text-gray-700 mb-2 border-b pb-1">Materials</h5><ul class="list-disc list-inside text-sm text-gray-600 space-y-1">${currentSubcategory.materials ? currentSubcategory.materials.map(m => `<li>${m}</li>`).join('') : '<li>...</li>'}</ul></div>
                     <div><h5 class="font-semibold text-md text-gray-700 mb-2 border-b pb-1">Process Steps</h5><ol class="list-decimal list-inside text-sm text-gray-600 space-y-1">${currentSubcategory.processSteps ? currentSubcategory.processSteps.map(s => `<li>${s}</li>`).join('') : '<li>...</li>'}</ol></div>
                 </div>`;

             if (currentSubcategory.videos && currentSubcategory.videos.length > 0) {
                 detailsHtml += `<h4 class="text-lg font-semibold text-gray-700 mb-3 pt-4 border-t">Related Videos</h4><div class="video-linker-container">`;
                 currentSubcategory.videos.forEach(video => {
                     if (video.flat_index === undefined || !video.youtubeId) { console.warn("Skipping video:", video.title); return; }
                     const youtubeWatchUrl = `https://www.youtube.com/watch?v={video.youtubeId}`; // Use the correct link structure
                     const bgColor = video.color_tag;
                     const iconClass = video.icon_tag_fa;
                     const flatIndex = video.flat_index;
                     const useNoIconFallback = !iconClass || iconClass === 'fas fa-video';
                     detailsHtml += `<a href="${youtubeWatchUrl}" target="_blank" class="video-linker ${useNoIconFallback ? 'no-icon' : ''}" style="background-color: ${bgColor};" data-flat-index="${flatIndex}" title="Open video: ${video.title}">`;
                     if (!useNoIconFallback) { detailsHtml += `<i class="${iconClass}"></i>`; }
                     else { detailsHtml += video.title.substring(0, 15) + (video.title.length > 15 ? '...' : ''); }
                     detailsHtml += `</a>`;
                 });
                 detailsHtml += `</div>`;
             }

             detailsHtml += `<div class="mt-8 text-right"><button class="details-back-button">Back to Subcategories</button></div>`; // Changed button text

             megamenuDetailsArea.innerHTML = detailsHtml;
             megamenuColumnsContainer.classList.add('columns-hidden'); // Hide columns
             megamenuDetailsArea.classList.add('visible'); // Show details

             if (updateHash) { window.location.hash = `${area}@${uniqueId}`; }

             // Update the active state of the toggle button in the (hidden) columns view
             const correspondingToggle = megamenuColumnsContainer.querySelector(`.subcategory-toggle[data-area="${area}"][data-uniqueid="${uniqueId}"]`);
             if (correspondingToggle && activeSubcategoryToggle !== correspondingToggle) {
                  if(activeSubcategoryToggle) { activeSubcategoryToggle.classList.remove('active'); activeSubcategoryToggle.textContent = 'Show More Info'; }
                  correspondingToggle.classList.add('active'); correspondingToggle.textContent = 'Hide Info'; activeSubcategoryToggle = correspondingToggle;
             } else if (correspondingToggle && !activeSubcategoryToggle) {
                  correspondingToggle.classList.add('active'); correspondingToggle.textContent = 'Hide Info'; activeSubcategoryToggle = correspondingToggle;
             }
         }

        function hideSubcategoryDetails(updateHash = true) {
             const detailsWereVisible = megamenuDetailsArea.classList.contains('visible');
             megamenuDetailsArea.classList.remove('visible');
             megamenuColumnsContainer.classList.remove('columns-hidden'); // Show columns again
             if (activeSubcategoryToggle) {
                 activeSubcategoryToggle.classList.remove('active');
                 activeSubcategoryToggle.textContent = 'Show More Info';
                 activeSubcategoryToggle = null;
             }
             if (detailsWereVisible && updateHash && currentArea) { // Use currentArea
                  window.location.hash = currentArea; // Reset hash to main category area
             }
             hideInfoPanel(); // Also hide video panel
             setTimeout(() => { if (!megamenuDetailsArea.classList.contains('visible')) { megamenuDetailsArea.innerHTML = ''; } }, 400);
         }

        function handleSubcategoryToggle(event) {
             event.stopPropagation();
             const currentButton = event.target;
             const area = currentButton.dataset.area;
             const uniqueId = currentButton.dataset.uniqueid;
             if (activeSubcategoryToggle === currentButton) { hideSubcategoryDetails(true); }
             else {
                 // No need to manipulate columns visibility here, displaySubcategoryDetails handles it
                 if (activeSubcategoryToggle) { activeSubcategoryToggle.classList.remove('active'); activeSubcategoryToggle.textContent = 'Show More Info'; }
                 displaySubcategoryDetails(area, uniqueId, true);
                 // State update for the button is now handled inside displaySubcategoryDetails
                 if (!bodyElement.classList.contains('glossary-visible')) {
                    requestAnimationFrame(() => { setTimeout(() => { megamenuDetailsArea.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 50); });
                 }
             }
          }

        // --- Category Title Display Functions ---
        function showCategoryTitle(category) {
            const displayName = category.area || 'Category'; // Use Area name
            categoryTitleDisplay.textContent = displayName;
            categoryTitleDisplay.classList.add('visible');
        }
        function hideCategoryTitle() {
            categoryTitleDisplay.classList.remove('visible');
            setTimeout(() => { if (!categoryTitleDisplay.classList.contains('visible')) { categoryTitleDisplay.textContent = ''; } }, 400);
        }

        // --- Page Load / Hash Handling ---
       function handlePageLoad() {
    // Get the hash without the # prefix
    let hash = window.location.hash.substring(1);
    
    if (!hash) {
        showHomepageView(); // Show grid if no hash
        return;
    }

    // Normalize hash to lowercase and trim any spaces
    hash = hash.toLowerCase().trim();

    // Split the hash by @ to check for subcategory requests
    const parts = hash.split('@');
    const categoryArea = parts[0]; 
    const subcategoryId = parts.length > 1 ? parts[1] : null;

    // Find if this category exists in our data
    const categoryMatch = categoryData.find(cat => 
        cat.area.toLowerCase() === categoryArea
    );

    if (categoryMatch) {
        console.log(`Found category match for hash: #${hash}`);
        
        // Show the category view for the requested area
        showCategoryView(categoryArea);

        // If there's also a subcategory ID specified
        if (subcategoryId) {
            // Use requestAnimationFrame + setTimeout to ensure DOM is updated
            requestAnimationFrame(() => {
                setTimeout(() => {
                    // Find the subcategory toggle button
                    const subcategoryToggle = megamenuColumnsContainer.querySelector(
                        `.subcategory-toggle[data-area="${categoryArea}"][data-uniqueid="${subcategoryId}"]`
                    );
                    
                    if (subcategoryToggle) {
                        // Display details for the requested subcategory
                        displaySubcategoryDetails(categoryArea, subcategoryId, false);
                        
                        // Scroll to details area after a short delay
                        setTimeout(() => {
                            megamenuDetailsArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }, 100);
                    } else {
                        console.warn(`Subcategory not found for hash: ${hash}. Showing category view.`);
                    }
                }, 100);
            });
        } else {
            // Just show the category columns view (no specific subcategory)
            hideSubcategoryDetails(false);
        }
    } else {
        console.warn(`Category not found for hash: ${hash}. Showing homepage.`);
        showHomepageView(); // Fallback to homepage if invalid category
    }
}



        
window.addEventListener('hashchange', function() {
    // Only handle if hash actually changed to avoid infinite loops
    const newHash = window.location.hash.substring(1).toLowerCase();
    if (newHash !== currentArea) {
        handlePageLoad();
    }
});

        // --- Event Delegation Setup ---
        function setupEventListeners() {
            // Glossary and Subcategory toggles within the category content
            categoryContentContainer.addEventListener('click', function(event) {
                const target = event.target;
                if (target.classList.contains('glossary-trigger')) { handleGlossaryTriggerClick(event); }
                else if (target.classList.contains('subcategory-toggle')) { handleSubcategoryToggle(event); }
                else if (target.closest('.details-back-button')) { hideSubcategoryDetails(true); } // Back from details to columns
                else if (target.classList.contains('sibling-link-pill') && !target.classList.contains('current')) {
                    event.preventDefault();
                    const area = target.dataset.area;
                    const uniqueId = target.dataset.uniqueid;
                    if (area && uniqueId) {
                        displaySubcategoryDetails(area, uniqueId, true);
                        requestAnimationFrame(() => { setTimeout(() => { megamenuDetailsArea.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 50); });
                    }
                }
            });

            // Back button to return to module grid
            backToModulesButton.addEventListener('click', showHomepageView);

            // Video Hover Listeners on Body (covers videos in details view)
            document.body.addEventListener('mouseover', (event) => {
                const linker = event.target.closest('.video-linker');
                if (linker) {
                    const flatIndex = linker.getAttribute('data-flat-index');
                    if (flatIndex !== null) {
                        const video = allVideosFlat[parseInt(flatIndex, 10)];
                        if (video) { showInfoPanel(video); }
                        else { console.warn("Video data not found for index:", flatIndex); }
                    }
                }
            });
             document.body.addEventListener('mouseout', (event) => {
                const leavingLinker = event.target.closest('.video-linker');
                const enteringElement = event.relatedTarget;
                if (leavingLinker && (!enteringElement || !enteringElement.closest('.video-linker, #video-info-panel'))) {
                     setTimeout(() => {
                         const currentlyHovered = document.querySelector('.video-linker:hover, #video-info-panel:hover');
                         if (!currentlyHovered) { hideInfoPanel(); }
                     }, 50);
                }
            });
             videoInfoPanel.addEventListener('mouseleave', hideInfoPanel); // Hide if leaving panel itself
        }

        
        // --- Initial Setup ---
        console.log("Initializing Hub...");
        flattenVideoData(categoryData);
        generateHomepageModules(); // Generate the initial module grid
        setupEventListeners();
        handlePageLoad(); // Check hash on load to potentially show a category/subcategory directly
       // hideInfoPanel(); // Ensure video panel is hidden initially
    console.log("Approvideo Learning Hub initialized with hash navigation support");

            document.addEventListener('DOMContentLoaded', initializeSlideshows);
    </script>
</body>
</html>
